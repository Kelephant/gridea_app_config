{
  "posts": [
    {
      "content": "åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å®šæ—¶çš„æ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œé€šå¸¸çš„åšæ³•æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶ååœ¨çº¿ç¨‹é‡Œæ‰§è¡Œä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå¦‚æœæœ‰Nä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåˆ™éœ€è¦å¯åŠ¨Nä¸ªå®šæ—¶ä»»åŠ¡ã€‚è¿™ç§åšæ³•æœ‰ä»¥ä¸‹å‡ ä¸ªå¼Šç«¯ã€‚\r\n1ã€é¢‘ç¹çš„åˆ›å»ºçº¿ç¨‹å¯èƒ½ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“è¿ä½œæ€§èƒ½ã€‚\r\n2ã€æ¯å®ç°ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåˆ™éœ€è¦è€ƒè™‘ä»»åŠ¡çš„åˆ›å»ºï¼Œé”€æ¯ï¼Œä»»åŠ¡çš„æ‰§è¡Œï¼Œè€Œä¸”å¤§éƒ¨åˆ†çš„å†…å®¹æ˜¯å†—ä½™çš„ã€‚\r\n3ã€å¤šä»»åŠ¡ä¹‹é—´çš„åŒæ­¥é—®é¢˜ã€‚\r\nä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œæˆ‘å®ç°äº†ä¸€ä¸ªå¤šå®ä¾‹å•çº¿ç¨‹å¤šä»»åŠ¡çš„å®šæ—¶å™¨åº“ã€‚\r\n\r\n<!-- more -->\r\n\r\n# å®ç°æ–¹æ¡ˆ\r\n## æ•°æ®ç»“æ„\r\n ```\r\ntypedef struct {\r\n    struct list_head       head;                    // é“¾è¡¨å¤´\r\n    mtimer_task_callback   run;                     // ä»»åŠ¡å›è°ƒ\r\n    unsigned int        id;                         // å®šæ—¶ä»»åŠ¡id\r\n    unsigned int        last_tick;                  // ä¸Šä¸€æ¬¡æ‰§è¡Œçš„æ—¶é—´\r\n    unsigned int        timeout;                    // å®šæ—¶çš„è¶…æ—¶æ—¶é—´ï¼Œms\r\n    mtimer_task_mode    mode;                       // å®šæ—¶ä»»åŠ¡çš„å·¥ä½œæ¨¡å¼ï¼Œä¸¤ç§å·¥ä½œæ¨¡å¼ã€‚\r\n    void           *user_data1;                     // å®šæ—¶ä»»åŠ¡çš„ä¸Šä¸‹æ–‡1\r\n    void           *user_data2;                     // å®šæ—¶ä»»åŠ¡çš„ä¸Šä¸‹æ–‡2\r\n    unsigned int        remove;                     // å®šæ—¶ä»»åŠ¡æ˜¯å¦æ ‡è®°åˆ é™¤\r\n} mtimer_task;                                      // å®šæ—¶ä»»åŠ¡èŠ‚ç‚¹\r\n \r\ntypedef struct {\r\n    struct list_head    list;                       // ä»»åŠ¡åˆ—è¡¨\r\n    pthread_mutex_t  lock;                          // é”\r\n    unsigned int            id;                     // å¾…åˆ†é…çš„å®šæ—¶å™¨ä»»åŠ¡id\r\n    mtimer_get_current_time get_current_time;       // è·å–mså€¼çš„æ¥å£\r\n} mtimer_handle;                                    // å®šæ—¶å™¨å®ä¾‹\r\n ```\r\n\r\n## å·¥ä½œæ¨¡å¼\r\n### å®šæ—¶å™¨æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼\r\n ```\r\ntypedef enum {\r\n    MTIMER_MODE_LOOP = 0,        // å¾ªç¯ä»»åŠ¡ï¼Œæ¯éš”ä¸€ä¸ªtimeoutæ‰§è¡Œä¸€æ¬¡\r\n    MTIMER_MODE_NOT_LOOP,        // éå¾ªç¯ä»»åŠ¡ï¼Œä»…åœ¨timeoutæ—¶æ‰§è¡Œä¸€æ¬¡\r\n} mtimer_task_mode;\r\n ```\r\n## æ¥å£\r\n ```\r\n/*****************************************************************************\r\n å‡½ æ•° å  : mtimer_create\r\n åŠŸèƒ½æè¿°  : åˆ›å»ºå®šæ—¶å™¨åº“å®ä¾‹\r\n è¾“å…¥å‚æ•°  : mtimer_get_current_time func  \r\n è¾“å‡ºå‚æ•°  : æ— \r\n è¿” å› å€¼  : void\r\n            NULL    : åˆ›å»ºå¤±è´¥\r\n            éNULL   : åˆ›å»ºæˆåŠŸ\r\n*****************************************************************************/\r\nvoid *mtimer_create(mtimer_get_current_time func);\r\n \r\n/*****************************************************************************\r\n å‡½ æ•° å  : mtimer_destroy\r\n åŠŸèƒ½æè¿°  : é”€æ¯å®šæ—¶å™¨åº“å®ä¾‹\r\n è¾“å…¥å‚æ•°  : void *handle  \r\n è¾“å‡ºå‚æ•°  : æ— \r\n è¿” å› å€¼  : int\r\n            0   æˆåŠŸ\r\n            <0  å¤±è´¥\r\n*****************************************************************************/\r\nint mtimer_destroy(void *handle);\r\n \r\n/*****************************************************************************\r\n å‡½ æ•° å  : mtimer_task_reg\r\n åŠŸèƒ½æè¿°  : æ³¨å†Œå®šæ—¶å™¨ä»»åŠ¡\r\n è¾“å…¥å‚æ•°  : void *handle                 \r\n             mtimer_task_callback run  ä»»åŠ¡å›è°ƒ\r\n             unsigned int    timeout   è¶…æ—¶æ—¶é—´\r\n             mtimer_task_mode    mode  LOOP:å¾ªç¯, æ¯éš”timeoutè§¦å‘ä¸€æ¬¡; NOT_LOOP:ä»…è¿è¡Œä¸€æ¬¡\r\n             void       *user_data1    å›è°ƒå‚æ•°1\r\n             void       *user_data2    å›è°ƒå‚æ•°2\r\n è¾“å‡ºå‚æ•°  : æ— \r\n è¿” å› å€¼  : unsigned\r\n            è¿”å›å®šæ—¶å™¨id\r\n*****************************************************************************/\r\nunsigned int mtimer_task_reg(\r\n    void *handle,\r\n    mtimer_task_callback run,\r\n    unsigned int    timeout,\r\n    mtimer_task_mode    mode,\r\n    void       *user_data1,\r\n    void       *user_data2);\r\n \r\n/*****************************************************************************\r\n å‡½ æ•° å  : mtimer_task_unreg\r\n åŠŸèƒ½æè¿°  : åæ³¨å†Œå®šæ—¶å™¨ä»»åŠ¡\r\n è¾“å…¥å‚æ•°  : void *handle          \r\n             unsigned int task_id   å®šæ—¶ä»»åŠ¡id  \r\n è¾“å‡ºå‚æ•°  : æ— \r\n è¿” å› å€¼  : 0: åæ³¨å†ŒæˆåŠŸ\r\n            <0: åæ³¨å†Œå¤±è´¥\r\n*****************************************************************************/\r\nint mtimer_task_unreg(void *handle, unsigned int task_id);\r\n \r\n/*****************************************************************************\r\n å‡½ æ•° å  : mtimer_schedule\r\n åŠŸèƒ½æè¿°  : å®šæ—¶ä»»åŠ¡è°ƒåº¦\r\n è¾“å…¥å‚æ•°  : void *handle    \r\n             unsigned int n  æœ€å¤šå¯æ‰§è¡Œçš„å®šæ—¶ä»»åŠ¡æ•°ï¼Œé˜²æ­¢çº¿ç¨‹é˜»å¡å¤ªé•¿æ—¶é—´\r\n è¾“å‡ºå‚æ•°  : æ— \r\n è¿” å› å€¼  : 0  æ‰§è¡Œæ­£å¸¸\r\n            <0  æ‰§è¡Œå¼‚å¸¸\r\n*****************************************************************************/\r\nint mtimer_schedule(void *handle, unsigned int n);\r\n ```\r\n### ä½¿ç”¨èŒƒä¾‹\r\n ```\r\nint func1(void *data1, void *data2)\r\n{\r\n    log_error(\"[time:%u, func1], data1:%s, data2:%s\\n\", Clock_GetTimeMs(),\r\n              (char *)data1, (char *)data2);\r\n    return 0;\r\n}\r\n \r\nint func2(void *data1, void *data2)\r\n{\r\n    log_error(\"[time:%u, func2], data1:%s, data2:%s\\n\", Clock_GetTimeMs(),\r\n              (char *)data1, (char *)data2);\r\n    return 0;\r\n}\r\n \r\nvoid *mtimer_debug_loop(void *handle)\r\n{\r\n \r\n    unsigned id1, id2;\r\n \r\n    log_error(\"tick: %u------------------------------------ 1\\n\\n\",\r\n              Clock_GetTimeMs());\r\n    id1 = mtimer_task_reg(handle, func1, 500, MTIMER_MODE_LOOP, \"1data1\", \"1data2\");\r\n    id2 = mtimer_task_reg(handle, func2, 1000, MTIMER_MODE_NOT_LOOP, \"2data1\",\r\n                          \"2data2\");\r\n    while (1) {\r\n        mtimer_schedule(handle, 10);\r\n        Clock_SleepMs(100);\r\n    }\r\n \r\n    mtimer_destroy(handle);\r\n \r\n    return NULL;\r\n}\r\n \r\nint mtimer_debug()\r\n{\r\n    void *handle;\r\n    if (IS_NULL(handle = mtimer_create(Clock_GetTimeMs))) {\r\n        log_error(\"mtimer_create failed\\n\");\r\n        return -1;\r\n    }\r\n \r\n    pthread_t tid;\r\n    pthread_create(&tid, NULL, mtimer_debug_loop, (void *)handle);\r\n    pthread_detach(tid);\r\n \r\n    return 0;\r\n}\r\n ```\r\n\r\n# å®Œæ•´ä»£ç \r\nä»£ç è¿˜æ²¡æœ‰æ•´ç†å¥½ï¼Œåç»­æ•´ç†å®Œä¹‹åä¼šæœ‰æ›´æ–°ï¼Œè¿«åˆ‡éœ€è¦çš„å¯ä»¥ç§èŠ\r\n",
      "data": {
        "title": "Cè¯­è¨€å®šæ—¶ä»»åŠ¡åº“çš„å®ç°ï¼ˆä¸€ï¼‰",
        "date": "2024-04-10 15:13:14",
        "tags": [
          "timer",
          "C"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å®šæ—¶çš„æ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œé€šå¸¸çš„åšæ³•æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶ååœ¨çº¿ç¨‹é‡Œæ‰§è¡Œä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå¦‚æœæœ‰Nä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåˆ™éœ€è¦å¯åŠ¨Nä¸ªå®šæ—¶ä»»åŠ¡ã€‚è¿™ç§åšæ³•æœ‰ä»¥ä¸‹å‡ ä¸ªå¼Šç«¯ã€‚\r\n1ã€é¢‘ç¹çš„åˆ›å»ºçº¿ç¨‹å¯èƒ½ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“è¿ä½œæ€§èƒ½ã€‚\r\n2ã€æ¯å®ç°ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåˆ™éœ€è¦è€ƒè™‘ä»»åŠ¡çš„åˆ›å»ºï¼Œé”€æ¯ï¼Œä»»åŠ¡çš„æ‰§è¡Œï¼Œè€Œä¸”å¤§éƒ¨åˆ†çš„å†…å®¹æ˜¯å†—ä½™çš„ã€‚\r\n3ã€å¤šä»»åŠ¡ä¹‹é—´çš„åŒæ­¥é—®é¢˜ã€‚\r\nä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œæˆ‘å®ç°äº†ä¸€ä¸ªå¤šå®ä¾‹å•çº¿ç¨‹å¤šä»»åŠ¡çš„å®šæ—¶å™¨åº“ã€‚\r",
      "fileName": "c-yu-yan-ding-shi-ren-wu-ku-de-shi-xian-yi"
    },
    {
      "content": "Openbmc ipmiåœ¨è¿è¡Œä¹‹åï¼Œå‡ºç°æ®µé”™è¯¯\r\n<!-- more -->\r\n\r\n# èƒŒæ™¯\r\n\r\nOpenbmc ipmiåœ¨è¿è¡Œä¹‹åï¼Œå‡ºç°æ®µé”™è¯¯ï¼Œæ®µé”™è¯¯çš„dumpä¿¡æ¯å¦‚ä¸‹\r\n\r\né€šè¿‡å †æ ˆå¯ä»¥çœ‹åˆ°å¼‚å¸¸åœ¨opensslåº“é‡Œé¢ï¼Œå†å¾€ä¸Šè¿½è¸ªå·²ç»æ²¡æœ‰æ ˆäº†\r\n\r\n# åˆ†æ\r\n\r\nOpensslåº“æ­£å¸¸æ˜¯ä¸ä¼šæœ‰é—®é¢˜çš„ï¼Œå¯ä»¥å…ˆæš‚æ—¶å…ˆæ’é™¤ã€‚å†å¾€ä¸Šå°±æ˜¯æ ˆè¢«ç ´åäº†ï¼Œè°è°ƒç”¨EVP_Q_macä¸çŸ¥é“ï¼Œåˆ†æåˆ°è¿™é‡Œå°±æ‡’å¾—å†å¾€ä¸‹è¿½è¸ªäº†ã€‚åç»­é€šè¿‡æ›¿æ¢openbmcç‰ˆæœ¬ï¼Œipmiç‰ˆæœ¬å°è¯•è§£å†³ï¼Œåšäº†å¾ˆå¤šæ— ç”¨åŠŸã€‚æœ€é¢ï¼Œé€šè¿‡åˆ†ægithubä¸Šçš„logæ‰æ‰¾åˆ°çœŸæ­£çš„é—®é¢˜ã€‚å¦‚æœå½“åˆç¡¬ç€å¤´çš®ï¼Œå¾€ä¸‹æƒ³æƒ³ï¼Œæˆ–è®¸èƒ½æ›´å¿«å‘ç°é—®é¢˜ï¼Œè¯¥åæ€åæ€ã€‚\r\n\r\n1. è°è°ƒç”¨äº†EVP_Q_macï¼Ÿ\r\n    1. Ipmiå¹¶æ²¡æœ‰ç›´æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼Œé‚£å°±æ˜¯é—´æ¥è°ƒç”¨ï¼Œå¦‚æœåº“æ²¡æœ‰å¸¦ç¬¦å·è¡¨ï¼Œé‚£é—®é¢˜å¤æ‚åº¦æ›´é«˜äº†ã€‚\r\n        \r\n        **ï¼ˆ1ï¼‰æ²¡æœ‰ç¬¦å·è¡¨**\r\n        \r\n        1. **å¦‚æœæ˜¯ç›´æ¥è°ƒç”¨ï¼Œæˆ‘ä»¬ç›´æ¥æ‰“å°å‚æ•°å†…å®¹**\r\n        2. **é—´æ¥è°ƒç”¨ï¼Œéœ€è¦æ‰¾åˆ°EVP_Q_macçš„å„ç§å¼•ç”¨å‡½æ•°ï¼Œå†ä¸€ä¸ªä¸ªè¿½è¸ªå¼•ç”¨å‡½æ•°**\r\n        \r\n        **ï¼ˆ2ï¼‰æœ‰ç¬¦å·è¡¨ï¼šé€šè¿‡è®¾ç½®æ–­ç‚¹ï¼Œåœ¨æ ˆè¢«ç ´åå‰ï¼ŒæŠŠå‡½æ•°åœä½ï¼ŒæŠŠæ ˆå…ˆæ‰“å‡ºæ¥ï¼Œè¿™æ ·å°±æ¸…æ¥šå¼‚å¸¸çš„å…·ä½“ä½ç½®äº†ã€‚**\r\n        \r\n        1. åœ¨å¼‚å¸¸çš„ä½ç½®è®¾ç½®ä¸€ä¸ªæ–­ç‚¹\r\n        2. run\r\n        3. åœ¨è¿è¡Œåˆ°æ–­ç‚¹çš„æ—¶å€™è‡ªåŠ¨åœæ­¢ï¼Œæ‰§è¡Œbtï¼Œé€šè¿‡è¿™ä¸ªæ–¹å¼å°±èƒ½çœ‹åˆ°å¼‚å¸¸çš„ç‚¹åœ¨read passwordäº†\r\n        ![](https://kelephant.github.io/gridea/post-images/1712674496787.png)\r\n\r\n    2. æ ˆä¸ºä»€ä¹ˆè¢«ç ´åï¼Ÿè¢«ç ´åçš„æ ˆæœ‰æ²¡æœ‰åŠæ³•æ¢å¤ï¼Œæˆ–è€…è°ƒè¯•æ‰‹æ®µé˜²æ­¢æ ˆè¢«ç ´åï¼Ÿ\r\n        1. Gdbåœ¨æ‰§è¡Œæ—¶æ˜¯å¦èƒ½åŠ å‚æ•°ï¼Œä¿æŠ¤æ ˆä¸è¢«ç ´åï¼Ÿä¼¼ä¹æ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•\r\n        2. Gccç¼–è¯‘å‚æ•°ï¼Œå‚è€ƒä¸‹é¢çš„æ–‡ç« ï¼šhttps://outflux.net/blog/archives/2014/01/27/fstack-protector-strong/\r\n\r\n# 64ä½ç³»ç»Ÿåœ°å€ç¿»è¯‘\r\n\r\n1. æ‰¾åˆ°å¼‚å¸¸åœ°å€å¯¹åº”çš„æ®µï¼ˆ/proc/{pid}/mapsï¼‰\r\n2. å°†åœ°å€ä¸æ®µçš„èµ·å§‹åœ°å€ï¼Œä½œå·®ï¼Œå³å¯å¾—åˆ°å¼‚å¸¸çš„ä½ç½®\r\n3. å¦‚æœæ˜¯.soæ–‡ä»¶ï¼Œé€šè¿‡objdump -d libcrypto.so.3 | grep 1b02a0(è¿™ä¸ªæ˜¯ä½œå·®åçš„å€¼)\r\n4. å¦‚æœæ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šè¿‡addr2lineå³å¯\r\n\r\n# å…¶ä»–\r\n\r\n## åŠ¨æ€åº“åŠ è½½æƒ…å†µ\r\n\r\ninfo sharedlibrary\r\n\r\n## æ‰€æœ‰çº¿ç¨‹çš„bt\r\n\r\nthread apply all bt\r\n\r\nä½¿ç”¨è¯¥åŠæ³•å¯ä»¥å®šä½æ­»é”é—®é¢˜",
      "data": {
        "title": "openbmc å¼‚å¸¸æ ˆåˆ†æåŠå¤ç›˜",
        "date": "2024-04-09 22:53:33",
        "tags": [
          "openbmc",
          "coredump",
          "debug"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "Openbmc ipmiåœ¨è¿è¡Œä¹‹åï¼Œå‡ºç°æ®µé”™è¯¯\r",
      "fileName": "openbmc-yi-chang-zhan-fen-xi-ji-fu-pan"
    },
    {
      "content": "# Kernelå…³æœºæ­»é”é—®\r\n\r\n# èƒŒæ™¯\r\n\r\n## å†…æ ¸ç‰ˆæœ¬\r\n\r\nLinux 4.4.194 ohci_hcd\r\n\r\n## é—®é¢˜æè¿°\r\n\r\n**æ‰§è¡Œshutdown -h now**\r\n```\r\n[Â  OKÂ  ] Stopped Load Kernel Modules.\r\n\r\n[Â  OKÂ  ] Unmounted /share.\r\n\r\n[Â  OKÂ  ] Stopped target Local File Systems (Pre).\r\n\r\n[Â  OKÂ  ] Reached target Unmount All Filesystems.\r\n\r\n[Â  OKÂ  ] Stopped Create Static Device Nodes in /dev.\r\n\r\n[Â  OKÂ  ] Stopped Create System Users.\r\n\r\n[Â  OKÂ  ] Stopped Remount Root and Kernel File Systems.\r\n\r\n[Â  OKÂ  ] Reached target Shutdown.\r\n\r\n[Â  OKÂ  ] Reached target Final Step.\r\n\r\n[Â  OKÂ  ] Finished Power-Off.\r\n\r\n[Â  OKÂ  ] Reached target Power-Off.\r\n\r\n[Â Â  69.279680]\r\n\r\n[Â Â  69.281172] ======================================================\r\n\r\n[Â Â  69.287345] [ INFO: possible circular locking dependency detected ]\r\n\r\n[Â Â  69.293605] 4.4.194 #1 Not tainted\r\n\r\n[Â Â  69.297001] -------------------------------------------------------\r\n\r\n[Â Â  69.303265] systemd-shutdow/1 is trying to acquire lock:\r\n\r\n[Â Â  69.303286]Â  (&policy->rwsem){+++++.}, at: [<ffffff800884335c>] cpufreq_update_policy+0x40/0x158\r\n\r\n[Â Â  69.303287]\r\n\r\n[Â Â  69.303287] but task is already holding lock:\r\n\r\n[Â Â  69.303300]Â  (mdev_list_sem){++++..}, at: [<ffffff80085577d0>] rockchip_system_status_notifier+0x34/0x118\r\n\r\n[Â Â  69.303302]\r\n\r\n[Â Â  69.303302] which lock already depends on the new lock.\r\n\r\n[Â Â  69.303302]\r\n\r\n[Â Â  69.303303]\r\n\r\n[Â Â  69.303303] the existing dependency chain (in reverse order) is:\r\n\r\n[Â Â  69.303307]\r\n\r\n[Â Â  69.303307] -> #2 (mdev_list_sem){++++..}:\r\n\r\n[Â Â  69.303313]Â Â Â Â Â Â Â  [<ffffff800811f264>] __lock_acquire+0x1348/0x191c\r\n\r\n[Â Â  69.303317]Â Â Â Â Â Â Â  [<ffffff800811febc>] lock_acquire+0x1e0/0x23c\r\n\r\n[Â Â  69.303323]Â Â Â Â Â Â Â  [<ffffff8008c4ea64>] down_read+0x5c/0xdc\r\n\r\n[Â Â  69.303327DDR Version 1.24 20191016\r\n\r\nIn\r\n\r\n---\r\n\r\næ‰§è¡Œrebootï¼Œå†…æ ¸deadlockï¼Œä¼šè‡ªåŠ¨é‡å¯\r\n\r\nStopping WPA supplicant...\r\n\r\n[Â  OKÂ  ] Stopped WPA supplicant.\r\n\r\nStopping D-Bus System Message Bus...\r\n\r\n[Â  OKÂ  ] Stopped D-Bus System Message Bus.\r\n\r\n[Â  OKÂ  ] Stopped target Basic System.\r\n\r\n[Â  OKÂ  ] Stopped target Paths.\r\n\r\n[Â  OKÂ  ] Stopped target Slices.\r\n\r\n[Â  OKÂ  ] Removed slice User and Session Slice.\r\n\r\n[Â  OKÂ  ] Stopped target Sockets.\r\n\r\n[Â  OKÂ  ] Closed D-Bus System Message Bus Socket.\r\n\r\n[Â  OKÂ  ] Closed Docker Socket for the API.\r\n\r\n[Â  OKÂ  ] Stopped target System Initialization.\r\n\r\n[Â  OKÂ  ] Stopped target Local Encrypted Volumes.\r\n\r\n[Â  OKÂ  ] Stopped Dispatch Password â€¦ts to Console Directory Watch.\r\n\r\n[Â  OKÂ  ] Stopped Forward Password Râ€¦uests to Wall Directory Watch.\r\n\r\n[Â  OKÂ  ] Stopped target Swap.\r\n\r\n[Â  OKÂ  ] Closed Syslog Socket.\r\n\r\nStopping Network Time Synchronization...\r\n\r\nStopping Update UTMP about System Boot/Shutdown...\r\n\r\n[Â  OKÂ  ] Stopped Network Name Resolution.\r\n\r\n[Â  OKÂ  ] Stopped Update UTMP about System Boot/Shutdown.\r\n\r\n[Â  OKÂ  ] Stopped ifup for eth0.\r\n\r\n[Â  OKÂ  ] Stopped Network Time Synchronization.\r\n\r\n[Â  OKÂ  ] Stopped Create Volatile Files and Directories.\r\n\r\n[Â  OKÂ  ] Stopped ifup for eth1.13.\r\n\r\n[Â  OKÂ  ] Stopped ifup for eth1.\r\n\r\n[Â  OKÂ  ] Stopped Raise network interfaces.\r\n\r\n[Â  OKÂ  ] Stopped target Local File Systems.\r\n\r\nUnmounting /share...\r\n\r\n[Â  OKÂ  ] Stopped Apply Kernel Variables.\r\n\r\n[Â  OKÂ  ] Stopped Load Kernel Modules.\r\n\r\n[Â  OKÂ  ] Unmounted /share.\r\n\r\n[Â  OKÂ  ] Stopped target Local File Systems (Pre).\r\n\r\n[Â  OKÂ  ] Reached target Unmount All Filesystems.\r\n\r\n[Â  OKÂ  ] Stopped Create Static Device Nodes in /dev.\r\n\r\n[Â  OKÂ  ] Stopped Create System Users.\r\n\r\n[Â  OKÂ  ] Stopped Remount Root and Kernel File Systems.\r\n\r\n[Â  OKÂ  ] Reached target Shutdown.\r\n\r\n[Â  OKÂ  ] Reached target Final Step.\r\n\r\n[Â  OKÂ  ] Finished Reboot.\r\n\r\n[Â  OKÂ  ] Reached target Reboot.\r\n\r\n[Â Â  21.169263] dw_wdt: unexpected close, system will reboot soon\r\n\r\n[Â Â  21.550470]\r\n\r\n[Â Â  21.551963] ======================================================\r\n\r\n[Â Â  21.558139] [ INFO: possible circular locking dependency detected ]\r\n\r\n[Â Â  21.564401] 4.4.194 #1 Not tainted\r\n\r\n[Â Â  21.567799] -------------------------------------------------------\r\n\r\n[Â Â  21.574059] systemd-shutdow/1 is trying to acquire lock:\r\n\r\n[Â Â  21.579364]Â  (&policy->rwsem){+++++.}, at: [<ffffff800884335c>] cpufreq_update_policy+0x40/0x158\r\n\r\n[Â Â  21.588223]\r\n\r\n[Â Â  21.588223] but task is already holding lock:\r\n\r\n[Â Â  21.594049]Â  (mdev_list_sem){++++..}, at: [<ffffff80085577d0>] rockchip_system_status_notifier+0x34/0x118\r\n\r\n[Â Â  21.603681]\r\n\r\n[Â Â  21.603681] which lock already depends on the new lock.\r\n\r\n[Â Â  21.603681]\r\n\r\n[Â Â  21.611852]\r\n\r\n[Â Â  21.611852] the existing dependency chain (in reverse order) is:\r\n\r\n[Â Â  21.619321]\r\n\r\n- > #2 (mdev_list_sem){++++..}:\r\n\r\n[Â Â  21.623668]Â Â Â Â Â Â Â  [<ffffff800811f264>] __lock_acquire+0x1348/0x191c\r\n\r\n[Â Â  21.630031]Â Â Â Â Â Â Â  [<ffffff800811febc>] lock_acquire+0x1e0/0x23c\r\n\r\n[Â Â  21.636052]Â Â Â Â Â Â Â  [<ffffff8008c4ea64>] down_read+0x5c/0xdc\r\n\r\n[Â Â  21.641641]Â Â Â Â Â Â Â  [<ffffff8008557310>] rockchip_monitor_cpufreq_policy_notifier+0x48/0x18c\r\n\r\n[Â Â  21.649995]Â Â Â Â Â Â Â  [<ffffff80080e0c94>] notifier_call_chain+0x78/0x98\r\n\r\n[Â Â  21.656451]Â Â Â Â Â Â Â  [<ffffff80080e10b0>] __blocking_notifier_call_chain+0x58/0x84\r\n\r\n[Â Â  21.663850]Â Â Â Â Â Â Â  [<ffffff80080e1118>] blocking_notifier_call_chain+0x3c/0x4c\r\n\r\n[Â Â  21.671079]Â Â Â Â Â Â Â  [<ffffff8008842f48>] cpufreq_set_policy+0xac/0x480\r\n\r\n[Â Â  21.677535]Â Â Â Â Â Â Â  [<ffffff8008843adc>] cpufreq_init_policy+0x90/0xc0\r\n\r\n[Â Â  21.683990]Â Â Â Â Â Â Â  [<ffffff80088443a4>] cpufreq_online+0x694/0x70c\r\n\r\n[Â Â  21.690181]Â Â Â Â Â Â Â  [<ffffff8008844514>] cpufreq_add_dev+0x7c/0xd0\r\n\r\n[Â Â  21.696286]Â Â Â Â Â Â Â  [<ffffff800865d148>] subsys_interface_register+0xb8/0xcc\r\n\r\n[Â Â  21.703264]Â Â Â Â Â Â Â  [<ffffff80088437b8>] cpufreq_register_driver+0x134/0x204\r\n\r\n[Â Â  21.710239]Â Â Â Â Â Â Â  [<ffffff800884dff4>] dt_cpufreq_probe+0x158/0x174\r\n\r\n[Â Â  21.716600]Â Â Â Â Â Â Â  [<ffffff80086611fc>] platform_drv_probe+0x5c/0xb0\r\n\r\n[Â Â  21.722960]Â Â Â Â Â Â Â  [<ffffff800865ed5c>] driver_probe_device+0x264/0x3d4\r\n\r\n[Â Â  21.729585]Â Â Â Â Â Â Â  [<ffffff800865f034>] __device_attach_driver+0x68/0xa4\r\n\r\n[Â Â  21.736295]Â Â Â Â Â Â Â  [<ffffff800865ce08>] bus_for_each_drv+0x90/0xa0\r\n\r\n[Â Â  21.742486]Â Â Â Â Â Â Â  [<ffffff800865e9e8>] __device_attach+0xb4/0x130\r\n\r\n[Â Â  21.748676]Â Â Â Â Â Â Â  [<ffffff800865f1d0>] device_initial_probe+0x24/0x30\r\n\r\n[Â Â  21.755217]Â Â Â Â Â Â Â  [<ffffff800865de5c>] bus_probe_device+0x38/0x9c\r\n\r\n[Â Â  21.761407]Â Â Â Â Â Â Â  [<ffffff800865bb84>] device_add+0x480/0x528\r\n\r\n[Â Â  21.767247]Â Â Â Â Â Â Â  [<ffffff8008660ee4>] platform_device_add+0xe8/0x22c\r\n\r\n[Â Â  21.773786]Â Â Â Â Â Â Â  [<ffffff8008661ae8>] platform_device_register_full+0xac/0xec\r\n\r\n[Â Â  21.781100]Â Â Â Â Â Â Â  [<ffffff80091fd464>] rockchip_cpufreq_driver_init+0xb8/0x2f8\r\n\r\n[Â Â  21.788417]Â Â Â Â Â Â Â  [<ffffff80080830f8>] do_one_initcall+0x78/0x198\r\n\r\n[Â Â  21.794608]Â Â Â Â Â Â Â  [<ffffff80091c0e94>] kernel_init_freeable+0x27c/0x280\r\n\r\n[Â Â  21.801319]Â Â Â Â Â Â Â  [<ffffff8008c4a0e8>] kernel_init+0x18/0x100\r\n\r\n[Â Â  21.807159]Â Â Â Â Â Â Â  [<ffffff8008082f10>] ret_from_fork+0x10/0x40\r\n\r\n[Â Â  21.813084]\r\n\r\n- > #1 ((cpufreq_policy_notifier_list).rwsem){.+.+.+}:\r\n\r\n[Â Â  21.819422]Â Â Â Â Â Â Â  [<ffffff800811f264>] __lock_acquire+0x1348/0x191c\r\n\r\n[Â Â  21.825782]Â Â Â Â Â Â Â  [<ffffff800811febc>] lock_acquire+0x1e0/0x23c\r\n\r\n[Â Â  21.831803]Â Â Â Â Â Â Â  [<ffffff8008c4ea64>] down_read+0x5c/0xdc\r\n\r\n[Â Â  21.837389]Â Â Â Â Â Â Â  [<ffffff80080e1098>] __blocking_notifier_call_chain+0x40/0x84\r\n\r\n[Â Â  21.844787]Â Â Â Â Â Â Â  [<ffffff80080e1118>] blocking_notifier_call_chain+0x3c/0x4c\r\n\r\n[Â Â  21.852015]Â Â Â Â Â Â Â  [<ffffff8008844350>] cpufreq_online+0x640/0x70c\r\n\r\n[Â Â  21.858206]Â Â Â Â Â Â Â  [<ffffff8008844514>] cpufreq_add_dev+0x7c/0xd0\r\n\r\n[Â Â  21.864312]Â Â Â Â Â Â Â  [<ffffff800865d148>] subsys_interface_register+0xb8/0xcc\r\n\r\n[Â Â  21.871287]Â Â Â Â Â Â Â  [<ffffff80088437b8>] cpufreq_register_driver+0x134/0x204\r\n\r\n[Â Â  21.878262]Â Â Â Â Â Â Â  [<ffffff800884dff4>] dt_cpufreq_probe+0x158/0x174\r\n\r\n[Â Â  21.884623]Â Â Â Â Â Â Â  [<ffffff80086611fc>] platform_drv_probe+0x5c/0xb0\r\n\r\n[Â Â  21.890982]Â Â Â Â Â Â Â  [<ffffff800865ed5c>] driver_probe_device+0x264/0x3d4\r\n\r\n[Â Â  21.897607]Â Â Â Â Â Â Â  [<ffffff800865f034>] __device_attach_driver+0x68/0xa4\r\n\r\n[Â Â  21.904317]Â Â Â Â Â Â Â  [<ffffff800865ce08>] bus_for_each_drv+0x90/0xa0\r\n\r\n[Â Â  21.910507]Â Â Â Â Â Â Â  [<ffffff800865e9e8>] __device_attach+0xb4/0x130\r\n\r\n[Â Â  21.916698]Â Â Â Â Â Â Â  [<ffffff800865f1d0>] device_initial_probe+0x24/0x30\r\n\r\n[Â Â  21.923238]Â Â Â Â Â Â Â  [<ffffff800865de5c>] bus_probe_device+0x38/0x9c\r\n\r\n[Â Â  21.929429]Â Â Â Â Â Â Â  [<ffffff800865bb84>] device_add+0x480/0x528\r\n\r\n[Â Â  21.935269]Â Â Â Â Â Â Â  [<ffffff8008660ee4>] platform_device_add+0xe8/0x22c\r\n\r\n[Â Â  21.941809]Â Â Â Â Â Â Â  [<ffffff8008661ae8>] platform_device_register_full+0xac/0xec\r\n\r\n[Â Â  21.949122]Â Â Â Â Â Â Â  [<ffffff80091fd464>] rockchip_cpufreq_driver_init+0xb8/0x2f8\r\n\r\n[Â Â  21.956436]Â Â Â Â Â Â Â  [<ffffff80080830f8>] do_one_initcall+0x78/0x198\r\n\r\n[Â Â  21.962626]Â Â Â Â Â Â Â  [<ffffff80091c0e94>] kernel_init_freeable+0x27c/0x280\r\n\r\n[Â Â  21.969335]Â Â Â Â Â Â Â  [<ffffff8008c4a0e8>] kernel_init+0x18/0x100\r\n\r\n[Â Â  21.975176]Â Â Â Â Â Â Â  [<ffffff8008082f10>] ret_from_fork+0x10/0x40\r\n\r\n[Â Â  21.981101]\r\n\r\n- > #0 (&policy->rwsem){+++++.}:\r\n\r\n[Â Â  21.985531]Â Â Â Â Â Â Â  [<ffffff800811ae44>] print_circular_bug+0x60/0x2bc\r\n\r\n[Â Â  21.991986]Â Â Â Â Â Â Â  [<ffffff800811ee1c>] __lock_acquire+0xf00/0x191c\r\n\r\n[Â Â  21.998261]Â Â Â Â Â Â Â  [<ffffff800811febc>] lock_acquire+0x1e0/0x23c\r\n\r\n[Â Â  22.004281]Â Â Â Â Â Â Â  [<ffffff8008c4eb44>] down_write+0x60/0xd8\r\n\r\n[Â Â  22.009953]Â Â Â Â Â Â Â  [<ffffff800884335c>] cpufreq_update_policy+0x40/0x158\r\n\r\n[Â Â  22.016663]Â Â Â Â Â Â Â  [<ffffff8008557878>] rockchip_system_status_notifier+0xdc/0x118\r\n\r\n[Â Â  22.024243]Â Â Â Â Â Â Â  [<ffffff80080e0c94>] notifier_call_chain+0x78/0x98\r\n\r\n[Â Â  22.030697]Â Â Â Â Â Â Â  [<ffffff80080e10b0>] __blocking_notifier_call_chain+0x58/0x84\r\n\r\n[Â Â  22.038096]Â Â Â Â Â Â Â  [<ffffff80080e1118>] blocking_notifier_call_chain+0x3c/0x4c\r\n\r\n[Â Â  22.045324]Â Â Â Â Â Â Â  [<ffffff8008556b58>] rockchip_system_status_notifier_call_chain+0x2c/0x54\r\n\r\n[Â Â  22.053773]Â Â Â Â Â Â Â  [<ffffff8008556be8>] rockchip_set_system_status+0x68/0xc8\r\n\r\n[Â Â  22.060833]Â Â Â Â Â Â Â  [<ffffff8008557628>] rockchip_monitor_reboot_notifier+0x18/0x3c\r\n\r\n[Â Â  22.068412]Â Â Â Â Â Â Â  [<ffffff80080e0c94>] notifier_call_chain+0x78/0x98\r\n\r\n[Â Â  22.074867]Â Â Â Â Â Â Â  [<ffffff80080e10b0>] __blocking_notifier_call_chain+0x58/0x84\r\n\r\n[Â Â  22.082265]Â Â Â Â Â Â Â  [<ffffff80080e1118>] blocking_notifier_call_chain+0x3c/0x4c\r\n\r\n[Â Â  22.089493]Â Â Â Â Â Â Â  [<ffffff80080e2f54>] kernel_restart_prepare+0x2c/0x50\r\n\r\n[Â Â  22.096203]Â Â Â Â Â Â Â  [<ffffff80080e30a0>] kernel_restart+0x20/0x68\r\n\r\n[Â Â  22.102223]Â Â Â Â Â Â Â  [<ffffff80080e33f8>] SyS_reboot+0x180/0x1dc\r\n\r\n[Â Â  22.108064]Â Â Â Â Â Â Â  [<ffffff8008082f70>] el0_svc_naked+0x24/0x28\r\n\r\n[Â Â  22.113989]\r\n\r\n[Â Â  22.113989] other info that might help us debug this:\r\n\r\n[Â Â  22.113989]\r\n\r\n[Â Â  22.121980] Chain exists of:\r\n\r\n&policy->rwsem --> (cpufreq_policy_notifier_list).rwsem --> mdev_list_sem\r\n\r\n[Â Â  22.131813]Â  Possible unsafe locking scenario:\r\n\r\n[Â Â  22.131813]\r\n\r\n[Â Â  22.137724]Â Â Â Â Â Â Â  CPU0Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  CPU1\r\n\r\n[Â Â  22.142255]Â Â Â Â Â Â Â  ----Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  ----\r\n\r\n[Â Â  22.146787]Â Â  lock(mdev_list_sem);\r\n\r\n[Â Â  22.150223]Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  lock((cpufreq_policy_notifier_list).rwsem);\r\n\r\n[Â Â  22.158164]Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  lock(mdev_list_sem);\r\n\r\n[Â Â  22.164111]Â Â  lock(&policy->rwsem);\r\n\r\n[Â Â  22.167632]\r\n\r\n[Â Â  22.167632]Â  *** DEADLOCK ***\r\n\r\n[Â Â  22.167632]\r\n\r\n[Â Â  22.173545] 5 locks held by systemd-shutdow/1:\r\n\r\n[Â Â  22.177980]Â  #0:Â  (reboot_mutex){+.+...}, at: [<ffffff80080e3378>] SyS_reboot+0x100/0x1dc\r\n\r\n[Â Â  22.186233]Â  #1:Â  ((reboot_notifier_list).rwsem){.+.+..}, at: [<ffffff80080e1098>] __blocking_notifier_call_chain+0x40/0x84\r\n\r\n[Â Â  22.197441]Â  #2:Â  (system_status_mutex){+.+...}, at: [<ffffff8008556bac>] rockchip_set_system_status+0x2c/0xc8\r\n\r\n[Â Â  22.207527]Â  #3:Â  ((system_status_notifier_list).rwsem){.+.+..}, at: [<ffffff80080e1098>] __blocking_notifier_call_chain+0x40/0x84\r\n\r\n[Â Â  22.219339]Â  #4:Â  (mdev_list_sem){++++..}, at: [<ffffff80085577d0>] rockchip_system_status_notifier+0x34/0x118\r\n\r\n[Â Â  22.229425]\r\n\r\n[Â Â  22.229425] stack backtrace:\r\n\r\n[Â Â  22.233781] CPU: 4 PID: 1 Comm: systemd-shutdow Not tainted 4.4.194 #1\r\n\r\n[Â Â  22.240306] Hardware name: Rockchip RK3399 Board Vclusters (DT)\r\n\r\n[Â Â  22.246218] Call trace:\r\n\r\n[Â Â  22.248664] [<ffffff8008088a40>] dump_backtrace+0x0/0x234\r\n\r\n[Â Â  22.254057] [<ffffff8008088c98>] show_stack+0x24/0x30\r\n\r\n[Â Â  22.259111] [<ffffff80084b0ba4>] dump_stack+0xb4/0xf4\r\n\r\n[Â Â  22.264163] [<ffffff800811afcc>] print_circular_bug+0x1e8/0x2bc\r\n\r\n[Â Â  22.270075] [<ffffff800811ee1c>] __lock_acquire+0xf00/0x191c\r\n\r\n[Â Â  22.275731] [<ffffff800811febc>] lock_acquire+0x1e0/0x23c\r\n\r\n[Â Â  22.281124] [<ffffff8008c4eb44>] down_write+0x60/0xd8\r\n\r\n[Â Â  22.286177] [<ffffff800884335c>] cpufreq_update_policy+0x40/0x158\r\n\r\n[Â Â  22.292270] [<ffffff8008557878>] rockchip_system_status_notifier+0xdc/0x118\r\n\r\n[Â Â  22.299221] [<ffffff80080e0c94>] notifier_call_chain+0x78/0x98\r\n\r\n[Â Â  22.305047] [<ffffff80080e10b0>] __blocking_notifier_call_chain+0x58/0x84\r\n\r\n[Â Â  22.311828] [<ffffff80080e1118>] blocking_notifier_call_chain+0x3c/0x4c\r\n\r\n[Â Â  22.318440] [<ffffff8008556b58>] rockchip_system_status_notifier_call_chain+0x2c/0x54\r\n\r\n[Â Â  22.326262] [<ffffff8008556be8>] rockchip_set_system_status+0x68/0xc8\r\n\r\n[Â Â  22.332693] [<ffffff8008557628>] rockchip_monitor_reboot_notifier+0x18/0x3c\r\n\r\n[Â Â  22.339644] [<ffffff80080e0c94>] notifier_call_chain+0x78/0x98\r\n\r\n[Â Â  22.345470] [<ffffff80080e10b0>] __blocking_notifier_call_chain+0x58/0x84\r\n\r\n[Â Â  22.352251] [<ffffff80080e1118>] blocking_notifier_call_chain+0x3c/0x4c\r\n\r\n[Â Â  22.358863] [<ffffff80080e2f54>] kernel_restart_prepare+0x2c/0x50\r\n\r\n[Â Â  22.364954] [<ffffff80080e30a0>] kernel_restart+0x20/0x68\r\n\r\n[Â Â  22.370346] [<ffffff80080e33f8>] SyS_reboot+0x180/0x1dc\r\n\r\n[Â Â  22.375568] [<ffffff8008082f70>] el0_svc_naked+0x24/0x28\r\n\r\n[Â Â  22.381157] cpu cpu4: min=816000, max=816000\r\n\r\n[Â Â  22.386760] cpu cpu0: min=816000, max=816000\r\n\r\n[Â Â  22.401700] rk-vcodec ff660000.rkvdec: shutdown\r\n\r\n[Â Â  22.406278] rk-vcodec ff650000.vpu_service: shutdown\r\n\r\n[Â Â  22.415938] reboot: Restarting system\r\n\r\n```\r\n\r\n## åŸå› \r\n\r\nRockchipåœ¨åˆå§‹åŒ–æ—¶ï¼Œä¼šæ³¨å†Œä¸€ä¸ªcpuçŠ¶æ€æ›´æ–°å’Œcpuç­–ç•¥æ›´æ–°çš„é€šçŸ¥å›è°ƒã€‚ä¸¤ä¸ªå›è°ƒéƒ½ä¼šå¯¹mdev_list_semä¸Šé”\r\n\r\nå…³æœºæ—¶ä¼šæ›´æ–°cpuçŠ¶æ€ï¼ˆæ€€ç–‘å…³æœºå°±æ˜¯å°†CPUé¢‘ç‡è®¾ç½®ä¸º0ï¼Œè¿™æ ·CPUå°±ä¸å·¥ä½œäº†ï¼‰\r\n\r\næ›´æ–°cpué¢‘ç‡æ—¶cpufreqé©±åŠ¨ä¼šé€šçŸ¥rockchip_system_status_notifieræ›´æ–°cpuçŠ¶æ€\r\n\r\nRockchipåœ¨æ›´æ–°cpuçŠ¶æ€æ—¶ï¼Œåè¿‡æ¥å†å»è®¾ç½®cpué¢‘ç‡å¹¶æ›´æ–°CPUç­–ç•¥\r\n\r\nè€Œä¸Šä¸€æ¬¡æ›´æ–°CPUçŠ¶æ€æ—¶ï¼Œå·²ç»å¯¹mdev_list_semä¸Šé”å¹¶æœªé‡Šæ”¾ï¼Œç°åœ¨æ›´æ–°CPUç­–ç•¥åˆè¦å†æ¬¡å¯¹å®ƒä¸Šé”ï¼Œå› è€Œæ­»é”\r\n\r\n## è§£å†³åŠæ³•\r\n\r\nåœ¨æ›´æ–°CPUè®¾å¤‡çŠ¶æ€æ—¶ï¼Œå…ˆä¸ç€æ€¥æ›´æ–°CPUç­–ç•¥ã€‚\r\n\r\nå…ˆæŠŠæ‰€æœ‰CPU è®¾å¤‡çŠ¶æ€æ›´æ–°äº†ï¼Œå¹¶è®°å½•å“ªäº›CPUè®¾å¤‡çŠ¶æ€å·²ç»æ›´æ–°ï¼Œç„¶åé‡Šæ”¾é”ã€‚\r\n\r\nå†æ›´æ–°è®°å½•çš„CPUè®¾å¤‡ç­–ç•¥ã€‚æ­»é”è§£å†³\r\n\r\n# ç»“æŸ",
      "data": {
        "title": "è®°ä¸€æ¬¡å†…æ ¸æ­»é”çš„è°ƒè¯•è¿‡ç¨‹",
        "date": "2024-04-09 22:39:02",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "ji-yi-ci-nei-he-si-suo-de-diao-shi-guo-cheng"
    },
    {
      "content": "åœ¨å®é™…çš„çº¿ä¸Šç¯å¢ƒä¸­ï¼Œå¦‚æœé‡åˆ°äº†é—®é¢˜ï¼Œç¨‹åºæ²¡æœ‰é€€å‡ºï¼Œå¹¶ä¸”æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœæ­¢è¿è¡Œçš„ç¨‹åºæ—¶ï¼Œå°±è¦æ±‚åœ¨åœ¨è¿è¡Œæ—¶è°ƒè¯•ç¨‹åº\r\n\r\nä½†æ˜¯é€šè¿‡gdb attachè°ƒè¯•ï¼Œå¯èƒ½åœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œä¼šä¸å°å¿ƒç ´åè¿è¡Œæ—¶ç¨‹åºï¼Œå½±å“æœåŠ¡\r\n\r\nè¿™ä¸ªæ—¶å€™å¯ä»¥å°†è¿è¡Œä¸­çš„è¿›ç¨‹å†…å­˜ï¼Œdumpä¸‹æ¥ï¼Œå®Œäº†ä½¿ç”¨gdbè°ƒè¯•dumpä¸‹æ¥çš„ä¿¡æ¯\r\n\r\n<!-- more -->\r\n\r\n# å…·ä½“æ“ä½œ\r\n\r\n```\r\n1. gcore è·å–core dump\r\nroot@localhost:/share/wenqikai# gcore 177389\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\n0x00007fad882d607b in pselect () from /lib/x86_64-linux-gnu/libc.so.6\r\nwarning: Memory read failed for corefile section, 4096 bytes at 0xffffffffff600000.\r\nSaved corefile core.177389\r\n[Inferior 1 (process 177389) detached]\r\n\r\n2. è°ƒè¯•\r\nroot@localhost:/share/wenqikai# gdb /usr/bin/top ./core.177389 \r\nGNU gdb (Ubuntu 9.2-0ubuntu1~20.04.1) 9.2\r\nCopyright (C) 2020 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.\r\nType \"show copying\" and \"show warranty\" for details.\r\nThis GDB was configured as \"x86_64-linux-gnu\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/gdb/bugs/>.\r\nFind the GDB manual and other documentation resources online at:\r\n    <http://www.gnu.org/software/gdb/documentation/>.\r\n\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from /usr/bin/top...\r\n(No debugging symbols found in /usr/bin/top)\r\n[New LWP 177389]\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\nCore was generated by `top'.\r\n#0  0x00007fad882d607b in __pselect (nfds=1, readfds=0x7ffd719b9a60, writefds=0x0, exceptfds=0x0, timeout=<optimized out>, sigmask=0x55a455914380)\r\n    at ../sysdeps/unix/sysv/linux/pselect.c:48\r\n48      ../sysdeps/unix/sysv/linux/pselect.c: No such file or directory.\r\n(gdb) bt\r\n#0  0x00007fad882d607b in __pselect (nfds=1, readfds=0x7ffd719b9a60, writefds=0x0, exceptfds=0x0, timeout=<optimized out>, sigmask=0x55a455914380)\r\n    at ../sysdeps/unix/sysv/linux/pselect.c:48\r\n#1  0x000055a4558d2bba in ?? ()\r\n#2  0x00007fad881e5083 in __libc_start_main (main=0x55a4558d1e00, argc=1, argv=0x7ffd719b9c98, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, \r\n    stack_end=0x7ffd719b9c88) at ../csu/libc-start.c:308\r\n#3  0x000055a4558d334e in ?? ()\r\n(gdb) info threads \r\n  Id   Target Id                          Frame \r\n* 1    Thread 0x7fad87f4d7c0 (LWP 177389) 0x00007fad882d607b in __pselect (nfds=1, readfds=0x7ffd719b9a60, writefds=0x0, exceptfds=0x0, timeout=<optimized out>, \r\n    sigmask=0x55a455914380) at ../sysdeps/unix/sysv/linux/pselect.c:48\r\n(gdb) qQuit\r\n(gdb) qQuit\r\n```",
      "data": {
        "title": "è¿è¡Œæ—¶ç¨‹åºå†…å­˜dump",
        "date": "2024-04-09 15:58:08",
        "tags": [
          "debug",
          "gdb",
          "coredump"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "åœ¨å®é™…çš„çº¿ä¸Šç¯å¢ƒä¸­ï¼Œå¦‚æœé‡åˆ°äº†é—®é¢˜ï¼Œç¨‹åºæ²¡æœ‰é€€å‡ºï¼Œå¹¶ä¸”æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœæ­¢è¿è¡Œçš„ç¨‹åºæ—¶ï¼Œå°±è¦æ±‚åœ¨åœ¨è¿è¡Œæ—¶è°ƒè¯•ç¨‹åº\r\n\r\nä½†æ˜¯é€šè¿‡gdb attachè°ƒè¯•ï¼Œå¯èƒ½åœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œä¼šä¸å°å¿ƒç ´åè¿è¡Œæ—¶ç¨‹åºï¼Œå½±å“æœåŠ¡\r\n\r\nè¿™ä¸ªæ—¶å€™å¯ä»¥å°†è¿è¡Œä¸­çš„è¿›ç¨‹å†…å­˜ï¼Œdumpä¸‹æ¥ï¼Œå®Œäº†ä½¿ç”¨gdbè°ƒè¯•dumpä¸‹æ¥çš„ä¿¡æ¯\r",
      "fileName": "yun-xing-shi-cheng-xu-nei-cun-dump"
    },
    {
      "content": "# å‚è€ƒæ–‡ç« \r\n\r\n1. è¯¥é“¾æ¥è®²è¿°äº†Call Trace çš„è°ƒè¯•æ–¹æ³•\r\n[decode-kernel-call-trace.md](https://gist.github.com/doughgle/735229c34c52f9006ca92a2cf24da990)\r\n\r\n2. å¸¦symbolçš„å†…æ ¸é•œåƒå®‰è£…ï¼Œæ­£å¸¸æƒ…å†µä¸‹/usr/lib/debug/boot/ä¼šä¿å­˜å¸¦symbolçš„å†…æ ¸é•œåƒï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼è‡ªè¡Œ\r\n[https://wiki.ubuntu.com/Debug Symbol Packages](https://wiki.ubuntu.com/Debug%20Symbol%20Packages)\r\n\r\n# è°ƒè¯•æ­¥éª¤\r\n\r\n## åˆ›å»ºè°ƒè¯•ç›®å½•\r\n\r\n```jsx\r\nmkdir -p ~/workspace/call_trace\r\n```\r\n\r\n## è®¾è®¡å¼‚å¸¸æ¨¡å—\r\n\r\n1. åˆ›å»ºkernel_call_trace.cæ–‡ä»¶\r\n\r\n```jsx\r\n#include <linux/kernel.h>\r\n#include <linux/module.h>\r\n#include <linux/mm.h>\r\n\r\nchar *ptr = NULL;\r\n\r\nint __init init_module(void) {\r\n  //ptr = kmalloc(sizeof(int), GFP_KERNEL);\r\n\r\n  *ptr = 0;\r\n\r\n  printk(KERN_ALERT \"Call trace:\\n\");\r\n  //backtrace();\r\n\r\n  // BUG();\r\n\r\n  return 0;\r\n}\r\n\r\nvoid __exit cleanup_module(void) {\r\n  //kfree(ptr);\r\n}\r\n```\r\n\r\n2. åˆ›å»ºMakefileæ–‡ä»¶\r\n```jsx\r\nobj-m := kernel_call_trace.o\r\n\r\nall:\r\n        make -C /usr/src/linux-headers-$(shell uname -r) M=$(PWD) modules\r\n\r\nclean:\r\n        make -C /usr/src/linux-headers-$(shell uname -r) M=$(PWD) clean\r\n```\r\n\r\n3. makeï¼Œç”Ÿæˆ kernel_call_trace.ko æ¨¡å—\r\n```jsx\r\nwenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ make \r\nmake -C /usr/src/linux-headers-6.2.0-37-generic M=/home/wenqikai/workspace/call_trace modules\r\nmake[1]: Entering directory '/usr/src/linux-headers-6.2.0-37-generic'\r\nwarning: the compiler differs from the one used to build the kernel\r\n  The kernel was built by: x86_64-linux-gnu-gcc-11 (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0\r\n  You are using:           gcc-11 (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0\r\n  CC [M]  /home/wenqikai/workspace/call_trace/kernel_call_trace.o\r\n  MODPOST /home/wenqikai/workspace/call_trace/Module.symvers\r\n  CC [M]  /home/wenqikai/workspace/call_trace/kernel_call_trace.mod.o\r\n  LD [M]  /home/wenqikai/workspace/call_trace/kernel_call_trace.ko\r\n  BTF [M] /home/wenqikai/workspace/call_trace/kernel_call_trace.ko\r\nSkipping BTF generation for /home/wenqikai/workspace/call_trace/kernel_call_trace.ko due to unavailability of vmlinux\r\nmake[1]: Leaving directory '/usr/src/linux-headers-6.2.0-37-generic'\r\nwenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ ls -l\r\ntotal 264\r\n-rw-rw-r-- 1 wenqikai wenqikai   3611 12æœˆ 19 13:37 call_trace.log\r\n-rwxr-xr-x 1 wenqikai wenqikai   7383 12æœˆ 19 11:26 decode_stacktrace.sh\r\n-rw-rw-r-- 1 wenqikai wenqikai    343 12æœˆ 19 11:33 kernel_call_trace.c\r\n-rw-rw-r-- 1 wenqikai wenqikai 115376 12æœˆ 19 14:13 kernel_call_trace.ko\r\n-rw-rw-r-- 1 wenqikai wenqikai     56 12æœˆ 19 14:13 kernel_call_trace.mod\r\n-rw-rw-r-- 1 wenqikai wenqikai    891 12æœˆ 19 14:13 kernel_call_trace.mod.c\r\n-rw-rw-r-- 1 wenqikai wenqikai  93400 12æœˆ 19 14:13 kernel_call_trace.mod.o\r\n-rw-rw-r-- 1 wenqikai wenqikai  23344 12æœˆ 19 14:13 kernel_call_trace.o\r\n-rw-rw-r-- 1 wenqikai wenqikai    176 12æœˆ 19 14:12 Makefile\r\n-rw-rw-r-- 1 wenqikai wenqikai     56 12æœˆ 19 14:13 modules.order\r\n-rw-rw-r-- 1 wenqikai wenqikai      0 12æœˆ 19 14:13 Module.symvers\r\n```\r\n\r\n4. åŠ è½½kernel_call_trace.ko æ¨¡å—ï¼Œç”±äºè¯¥å†…æ ¸æ¨¡å—æ˜¯æˆ‘ä»¬æ•…æ„åˆ¶é€ å¼‚å¸¸çš„ï¼Œæ‰€ä»¥åœ¨ä¸€åŠ è½½æ—¶ä¾¿ä¼šæŠ¥é”™ï¼Œé€šè¿‡dmesgå¯ä»¥æŸ¥åˆ°call traceä¿¡æ¯ã€‚ä¸‹é¢æ ‡çº¢éƒ¨åˆ†æ˜¯call traceçš„å®Œæ•´ä¿¡æ¯ï¼Œå…¶ä¸­å…¶ä¸­æ ‡è“éƒ¨åˆ†è¡¨ç¤ºå¼‚å¸¸çš„æ¨¡å—å\r\n```jsx\r\nwenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ sudo insmod  kernel_call_trace.ko \r\n[sudo] password for wenqikai: \r\nKilled\r\nwenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ sudo dmesg | tail -100\r\n...\r\n[ 2023-12-19 11:34:15 ] [70466.575935] Call Trace:\r\n[ 2023-12-19 11:34:15 ] [70466.578246]  <TASK>\r\n[ 2023-12-19 11:34:15 ] [70466.585635]  ? show_regs+0x72/0x90\r\n[ 2023-12-19 11:34:15 ] [70466.614356]  ? __die+0x25/0x80\r\n[ 2023-12-19 11:34:15 ] [70466.614381]  ? page_fault_oops+0x79/0x190\r\n[ 2023-12-19 11:34:15 ] [70466.615773]  ? do_user_addr_fault+0x30c/0x640\r\n[ 2023-12-19 11:34:15 ] [70466.615775]  ? down_write+0x13/0x90\r\n[ 2023-12-19 11:34:15 ] [70466.634448]  ? exc_page_fault+0x81/0x1b0\r\n[ 2023-12-19 11:34:15 ] [70466.635485]  ? asm_exc_page_fault+0x27/0x30\r\n[ 2023-12-19 11:34:15 ] [70466.635793]  ? __pfx_init_module+0x10/0x10 [kernel_call_trace]\r\n[ 2023-12-19 11:34:15 ] [70466.635802]  ? init_module+0x14/0xff0 [kernel_call_trace]\r\n[ 2023-12-19 11:34:15 ] [70466.635806]  ? do_one_initcall+0x46/0x240\r\n[ 2023-12-19 11:34:15 ] [70466.635870]  ? kmalloc_trace+0x2a/0xb0\r\n[ 2023-12-19 11:34:15 ] [70466.636483]  do_init_module+0x52/0x240\r\n[ 2023-12-19 11:34:15 ] [70466.636737]  load_module+0xb96/0xd60\r\n[ 2023-12-19 11:34:15 ] [70466.636740]  ? kernel_read_file+0x25c/0x2b0\r\n[ 2023-12-19 11:34:15 ] [70466.636965]  __do_sys_finit_module+0xcc/0x150\r\n[ 2023-12-19 11:34:15 ] [70466.636967]  ? __do_sys_finit_module+0xcc/0x150\r\n[ 2023-12-19 11:34:15 ] [70466.636972]  __x64_sys_finit_module+0x18/0x30\r\n[ 2023-12-19 11:34:15 ] [70466.636974]  do_syscall_64+0x59/0x90\r\n[ 2023-12-19 11:34:15 ] [70466.636994]  ? irqentry_exit+0x43/0x50\r\n[ 2023-12-19 11:34:15 ] [70466.636997]  ? exc_page_fault+0x92/0x1b0\r\n[ 2023-12-19 11:34:15 ] [70466.637000]  entry_SYSCALL_64_after_hwframe+0x73/0xdd\r\n[ 2023-12-19 11:34:15 ] [70466.637003] RIP: 0033:0x7ff0b911e69d\r\n[ 2023-12-19 11:34:15 ] [70466.637007] Code: 5b 41 5c c3 66 0f 1f 84 00 00 00 00 00 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d 63 a7 0f 00 f7 d8 64 89 01 48\r\n[ 2023-12-19 11:34:15 ] [70466.637009] RSP: 002b:00007fff662d0fc8 EFLAGS: 00000246 ORIG_RAX: 0000000000000139\r\n[ 2023-12-19 11:34:15 ] [70466.637012] RAX: ffffffffffffffda RBX: 0000562af52237b0 RCX: 00007ff0b911e69d\r\n[ 2023-12-19 11:34:15 ] [70466.637013] RDX: 0000000000000000 RSI: 0000562af4eb5cd2 RDI: 0000000000000003\r\n[ 2023-12-19 11:34:15 ] [70466.637015] RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000\r\n[ 2023-12-19 11:34:15 ] [70466.637016] R10: 0000000000000003 R11: 0000000000000246 R12: 0000562af4eb5cd2\r\n[ 2023-12-19 11:34:15 ] [70466.637018] R13: 0000562af5223760 R14: 0000562af4eb4888 R15: 0000562af52238d0\r\n```\r\n\r\n5. å°†Call Traceä¿¡æ¯å­˜å‚¨åˆ°call_trace.logæ–‡ä»¶ä¸­\r\n6. æ‹·è´å†…æ ¸ç¬¦å·è¡¨è§£æå·¥å…·åˆ°å½“å‰ç›®å½•ä¸‹\r\n```jsx\r\nwenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ cp /usr/src/linux-headers-$(uname -r)/scripts/decode_stacktrace.sh .\r\nwenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ ls -l\r\ntotal 264\r\n-rw-rw-r-- 1 wenqikai wenqikai   3611 12æœˆ 19 13:37 call_trace.log\r\n-rwxr-xr-x 1 wenqikai wenqikai   7383 12æœˆ 19 14:22 decode_stacktrace.sh\r\n-rw-rw-r-- 1 wenqikai wenqikai    343 12æœˆ 19 11:33 kernel_call_trace.c\r\n-rw-rw-r-- 1 wenqikai wenqikai 115376 12æœˆ 19 14:13 kernel_call_trace.ko\r\n-rw-rw-r-- 1 wenqikai wenqikai     56 12æœˆ 19 14:13 kernel_call_trace.mod\r\n-rw-rw-r-- 1 wenqikai wenqikai    891 12æœˆ 19 14:13 kernel_call_trace.mod.c\r\n-rw-rw-r-- 1 wenqikai wenqikai  93400 12æœˆ 19 14:13 kernel_call_trace.mod.o\r\n-rw-rw-r-- 1 wenqikai wenqikai  23344 12æœˆ 19 14:13 kernel_call_trace.o\r\n-rw-rw-r-- 1 wenqikai wenqikai    176 12æœˆ 19 14:12 Makefile\r\n-rw-rw-r-- 1 wenqikai wenqikai     56 12æœˆ 19 14:13 modules.order\r\n-rw-rw-r-- 1 wenqikai wenqikai      0 12æœˆ 19 14:13 Module.symvers\r\n```\r\n\r\n7. ä½¿ç”¨ä»¥ä¸‹ç›®å½•è§£æ\r\n./decode_stacktrace.sh /usr/lib/debug/boot/vmlinux-$(uname -r)  auto /home/wenqikai/workspace/call_trace/ < call_trace.log \r\n\r\nå‚æ•°è§£æï¼š\r\n- ./decode_stacktrace.shï¼šè§£æç¨‹åº\r\n- /usr/lib/debug/boot/vmlinux-$(uname -r)ï¼šå¸¦ç¬¦å·è¡¨çš„å†…æ ¸æ–‡ä»¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¯¥æ–‡ä»¶ï¼Œåˆ™å‚è€ƒè¯¥é“¾æ¥æ“ä½œå®‰è£…[https://wiki.ubuntu.com/Debug Symbol Packages](https://wiki.ubuntu.com/Debug%20Symbol%20Packages)\r\n- autoï¼š è¿™é‡Œåº”è¯¥æ˜¯è‡ªåŠ¨æ‰¾åˆ°ç³»ç»Ÿæ¨¡å—ç›®å½•\r\n- /home/wenqikai/workspace/call_trace/ï¼šè¿™é‡Œæ˜¯æˆ‘ä»¬è‡ªå·±çš„æ¨¡å—å­˜æ”¾ç›®å½•\r\n- call_trace.logï¼šcall traceæ–‡ä»¶\r\n```jsx\r\nwenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ ./decode_stacktrace.sh \r\nERROR! vmlinux image must be specified\r\nUsage:\r\n        ./decode_stacktrace.sh -r <release> | <vmlinux> [<base path>|auto] [<modules path>]\r\nwenqikai@wenqikai-virtual-machine:~/workspace/call_trace$ ./decode_stacktrace.sh /usr/lib/debug/boot/vmlinux-$(uname -r)  auto /home/wenqikai/workspace/call_trace/ < call_trace.log \r\n[70466.575935] Call Trace:\r\n[70466.578246]  <TASK>\r\n[70466.585635] ? show_regs (arch/x86/kernel/dumpstack.c:479) \r\n[70466.614356] ? __die (arch/x86/kernel/dumpstack.c:421 arch/x86/kernel/dumpstack.c:434) \r\n[70466.614381] ? page_fault_oops (arch/x86/mm/fault.c:727) \r\n[70466.615773] ? do_user_addr_fault (arch/x86/mm/fault.c:1270) \r\n[70466.615775] ? down_write (arch/x86/include/asm/preempt.h:80 kernel/locking/rwsem.c:261 kernel/locking/rwsem.c:1313 kernel/locking/rwsem.c:1323 kernel/locking/rwsem.c:1574) \r\n[70466.634448] ? exc_page_fault (arch/x86/include/asm/paravirt.h:700 arch/x86/mm/fault.c:1479 arch/x86/mm/fault.c:1527) \r\n[70466.635485] ? asm_exc_page_fault (arch/x86/include/asm/idtentry.h:570) \r\n[70466.635793] ? __pfx_init_module (/home/wenqikai/workspace/call_trace/kernel_call_trace.c:7) kernel_call_trace\r\n[70466.635802] ? init_module (/home/wenqikai/workspace/call_trace/kernel_call_trace.c:10) kernel_call_trace\r\n[70466.635806] ? do_one_initcall (init/main.c:1295) \r\n[70466.635870] ? kmalloc_trace (mm/slab_common.c:1065) \r\n[70466.636483] do_init_module (kernel/module/main.c:2463) \r\n[70466.636737] load_module (kernel/module/main.c:2872) \r\n[70466.636740] ? kernel_read_file (fs/kernel_read_file.c:110) \r\n[70466.636965] __do_sys_finit_module (kernel/module/main.c:2972) \r\n[70466.636967] ? __do_sys_finit_module (kernel/module/main.c:2972) \r\n[70466.636972] __x64_sys_finit_module (kernel/module/main.c:2939) \r\n[70466.636974] do_syscall_64 (arch/x86/entry/common.c:50 arch/x86/entry/common.c:80) \r\n[70466.636994] ? irqentry_exit (kernel/entry/common.c:446) \r\n[70466.636997] ? exc_page_fault (arch/x86/mm/fault.c:1531) \r\n[70466.637000] entry_SYSCALL_64_after_hwframe (arch/x86/entry/entry_64.S:120) \r\n[70466.637003] RIP: 0033:0x7ff0b911e69d\r\n./decode_stacktrace.sh: line 225: ./decodecode: No such file or directory\r\n[70466.637009] RSP: 002b:00007fff662d0fc8 EFLAGS: 00000246 ORIG_RAX: 0000000000000139\r\n[70466.637012] RAX: ffffffffffffffda RBX: 0000562af52237b0 RCX: 00007ff0b911e69d\r\n[70466.637013] RDX: 0000000000000000 RSI: 0000562af4eb5cd2 RDI: 0000000000000003\r\n[70466.637015] RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000\r\n[70466.637016] R10: 0000000000000003 R11: 0000000000000246 R12: 0000562af4eb5cd2\r\n[70466.637018] R13: 0000562af5223760 R14: 0000562af4eb4888 R15: 0000562af52238d0\r\n[70466.637038]  </TASK>\r\n```\r\n\r\n# å…¶ä»–\r\n\r\nåŒ…æŸ¥æ‰¾æ–¹æ³•\r\næ–¹æ³•1. sudo aptitude search linux-image-$(uname -r)-dbgsym\r\n\r\næ–¹æ³•2. \t$ apt search linux-image-$(uname -r)\r\n\r\nSorting... Done\r\nFull Text Search... Done\r\nlinux-image-5.4.0-80-generic/focal-updates,focal-security,now 5.4.0-80.90 amd64 [installed,automatic]\r\nSigned kernel image generic\r\n\r\n```\r\n\tlinux-image-5.4.0-80-generic-dbgsym/focal-updates,now 5.4.0-80.90 amd64 [installed]\r\n\t  Signed kernel image generic\r\n\r\n\t$ sudo apt install linux-image-`uname -r`-dbgsym\r\n\r\n```\r\n\r\n# ç»“æŸ",
      "data": {
        "title": "å†…æ ¸Call Traceè°ƒè¯•",
        "date": "2024-04-09 15:43:29",
        "tags": [
          "kernel",
          "debug",
          "gdb"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/nei-he-call-trace-diao-shi.webp",
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "nei-he-call-trace-diao-shi"
    },
    {
      "content": "> æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤\n\n## ğŸ  å…³äºæœ¬ç«™\n\n## ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°\n\n## â›¹ å…´è¶£çˆ±å¥½\n\n## ğŸ“¬ è”ç³»æˆ‘å‘€\n",
      "data": {
        "title": "å…³äº",
        "date": "2019-01-25 19:09:48",
        "tags": [],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "about"
    },
    {
      "content": "ğŸ‘  æ¬¢è¿ä½¿ç”¨ **Gridea** ï¼  \nâœï¸  **Gridea** ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ... \n\n<!-- more -->\n\n[Github](https://github.com/getgridea/gridea)  \n[Gridea ä¸»é¡µ](https://gridea.dev/)  \n[ç¤ºä¾‹ç½‘ç«™](https://fehey.com/)\n\n## ç‰¹æ€§ğŸ‘‡\nğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ **Markdown** è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ  \n\nğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡  \n\nğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„  \n\nğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•  \n\nğŸ’»  ä½ å¯ä»¥åœ¨ **Windows**ï¼Œ**MacOS** æˆ– **Linux** è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯  \n\nğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ **ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ** æˆ– **Coding Pages** å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°  \n\nğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ [Gitalk](https://github.com/gitalk/gitalk) æˆ– [DisqusJS](https://github.com/SukkaW/DisqusJS) è¯„è®ºç³»ç»Ÿ  \n\nğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨**ä¸­æ–‡ç®€ä½“**æˆ–**è‹±è¯­**  \n\nğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›  \n\nğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥  \n\nğŸŒ± å½“ç„¶ **Gridea** è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ\n\næœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´\n\nå°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼\n\nğŸ˜˜ Enjoy~\n",
      "data": {
        "title": "Hello Gridea",
        "date": "2018-12-12 00:00:00",
        "tags": [
          "Gridea"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/hello-gridea.png",
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "ğŸ‘  æ¬¢è¿ä½¿ç”¨ **Gridea** ï¼  \nâœï¸  **Gridea** ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ... ",
      "fileName": "hello-gridea"
    }
  ],
  "tags": [
    {
      "name": "timer",
      "slug": "n0CxDupw8",
      "used": true
    },
    {
      "name": "C",
      "slug": "OpCt2xzwzS",
      "used": true
    },
    {
      "name": "openbmc",
      "slug": "6GldNpxoe",
      "used": true
    },
    {
      "name": "coredump",
      "slug": "R47ThOsOa",
      "used": true
    },
    {
      "name": "kernel",
      "slug": "bmbnK_8p9",
      "used": true
    },
    {
      "name": "debug",
      "slug": "yqO2q0D-x4",
      "used": true
    },
    {
      "name": "gdb",
      "slug": "M2VJpWW02p",
      "used": true
    },
    {
      "name": "Gridea",
      "slug": "fQx70FJV7",
      "used": true
    }
  ],
  "menus": [
    {
      "link": "/gridea/",
      "name": "é¦–é¡µ",
      "openType": "Internal"
    },
    {
      "link": "/gridea/archives",
      "name": "æ–‡ç« ",
      "openType": "Internal"
    },
    {
      "link": "/gridea/tags",
      "name": "æ ‡ç­¾",
      "openType": "Internal"
    },
    {
      "link": "/gridea/post/about",
      "name": "å…³äº",
      "openType": "Internal"
    }
  ]
}